<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Huina 2026: 誓言集结</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; font-family: "PingFang SC", sans-serif; }

        .scene {
            position: relative; width: 100%; height: 100%;
            background: linear-gradient(to bottom, #1a1a2e 0%, #16213e 100%);
            display: flex; justify-content: center; align-items: center;
        }

        .stars {
            position: absolute; width: 100%; height: 100%;
            background: url('https://www.transparenttextures.com/patterns/stardust.png');
            opacity: 0.6;
        }

        /* 唯美发光背景圆 */
        .glow-circle {
            position: absolute; width: 600px; height: 600px;
            background: radial-gradient(circle, rgba(0, 212, 255, 0.2) 0%, transparent 70%);
            border-radius: 50%;
            z-index: 1;
        }

        /* 心形容器包装 */
        .heart-container-rel {
            position: relative;
            z-index: 10;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: -100px; /* 位置上移 */
        }

        /* 外部装饰环 */
        .heart-ring {
            position: absolute;
            width: 630px;
            height: 630px;
            border: 2px solid rgba(255, 215, 0, 0.15);
            border-radius: 50%;
            animation: rotate-ring 25s linear infinite;
            pointer-events: none;
        }
        .heart-ring::before {
            content: '';
            position: absolute;
            top: -10px; left: 50%;
            width: 15px; height: 15px;
            background: #ffd700;
            border-radius: 50%;
            box-shadow: 0 0 25px #ffd700, 0 0 50px #ff4500;
        }

        @keyframes rotate-ring {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .heart-wrapper {
            position: relative;
            width: 550px; /* 增大容器 */
            height: 550px;
            /* 适配 550px 的心形裁切路径 */
            clip-path: path('M275 495 C275 495 55 352 55 165 C55 88 121 33 198 33 C242 33 264 66 275 88 C286 66 308 33 352 33 C429 33 495 88 495 165 C495 352 275 495 275 495 Z');
            background: rgba(255, 255, 255, 0.05);
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 1px;
            padding: 0;
            cursor: pointer;
            backdrop-filter: blur(8px);
            overflow: hidden;
            box-shadow: 0 0 80px rgba(255, 215, 0, 0.3);
        }

        /* 装饰灯丝效果 - 增强脉冲感 */
        .heart-lights {
            position: absolute;
            top: -25px; left: -25px; right: -25px; bottom: -25px;
            pointer-events: none;
            z-index: -1;
            border: 2px dashed rgba(255, 215, 0, 0.4);
            border-radius: 50%;
            filter: drop-shadow(0 0 15px #ffd700);
            animation: pulse-lights 1.5s ease-in-out infinite;
        }

        @keyframes pulse-lights {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }

        .photo-item {
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            filter: grayscale(100%) brightness(0.2);
            opacity: 1;
            transition: all 0.4s ease;
        }

        .photo-item.active {
            filter: grayscale(0%) brightness(1.2);
            z-index: 2;
        }

        /* 陨石特效 - 增强彗星感 */
        .meteor {
            position: fixed;
            width: 8px;
            height: 300px; /* 极长尾巴 */
            background: linear-gradient(to top, #fff 0%, #ffd700 40%, #ff4500 70%, transparent 100%);
            border-radius: 50% 50% 10px 10px;
            z-index: 1000;
            pointer-events: none;
            filter: drop-shadow(0 0 30px #ff4500);
            transform-origin: bottom center;
        }

        .shockwave {
            position: fixed;
            border: 5px solid #ffd700;
            border-radius: 50%;
            pointer-events: none;
            z-index: 999;
            box-shadow: 0 0 50px #ff4500, inset 0 0 30px #ff4500;
        }

        .particle {
            position: fixed;
            width: 6px;
            height: 6px;
            background: #ffd700;
            border-radius: 50%;
            pointer-events: none;
            z-index: 999;
            box-shadow: 0 0 15px #ff4500;
        }

        /* 誓词卡片和按钮避让 - 位置下移 */
        .oath-card {
            position: absolute; bottom: 3%; width: 100%;
            display: flex; flex-direction: column; align-items: center;
            z-index: 20;
        }

        .oath-content {
            background: rgba(0, 0, 0, 0.75);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 215, 0, 0.4);
            padding: 15px 30px; border-radius: 15px;
            max-width: 500px; width: 85%;
            text-align: center; margin-bottom: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.9);
        }

        .oath-text {
            color: #ffd700; font-size: 18px; line-height: 1.6;
            letter-spacing: 1px; font-weight: 400;
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
        }

        .btn-ignite {
            background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%);
            color: #000;
            padding: 10px 50px; font-size: 20px; border: none;
            cursor: pointer; font-weight: bold; letter-spacing: 4px;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
            border-radius: 50px;
        }

        .btn-ignite:hover {
            transform: scale(1.1) translateY(-3px);
            box-shadow: 0 15px 50px rgba(255, 215, 0, 0.9);
        }

        .btn-ignite:active {
            transform: scale(0.9);
        }

        /* 转场光幕 */
        #flash {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #00d4ff; z-index: 100; display: none; opacity: 0;
        }

        .header {
            position: absolute; top: 8%; width: 100%; text-align: center;
            color: #fff; z-index: 10;
        }
        .header h1 { font-size: 42px; font-weight: 200; letter-spacing: 12px; margin: 0; }
        .header p { opacity: 0.5; letter-spacing: 5px; margin-top: 10px; }

        /* 闪现光效覆盖层 */
        .flash-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #fff;
            opacity: 0;
            pointer-events: none;
            z-index: 100;
        }
    </style>
</head>
<body>

<div id="flash"></div>

<div class="scene">
    <div class="stars"></div>
    <div class="glow-circle"></div>

    <div class="header">
        <h1>2026 誓师大会</h1>
        <p>汇聚全员志气 · 开启飞跃篇章</p>
    </div>

    <div class="heart-container-rel">
        <div class="heart-ring"></div>
        <div class="heart-lights"></div>
        <div class="heart-wrapper" id="heart-container">
            <!-- 动态生成格子 -->
            <div class="flash-overlay" id="flash-overlay"></div>
        </div>
    </div>

    <div class="oath-card">
        <div class="oath-content">
            <div class="oath-text" id="oath-display">“点击下方按钮开启誓言集结”</div>
        </div>
        <button class="btn-ignite" id="action-btn">宣读并点燃</button>
    </div>
</div>

<script>
    const oaths = [
        "（杜娇）品控中心：捍卫品质，严守红线，铸就黄金口碑！",
        "（卢丽纯）人资综合部：赋能组织，激活团队，保障高效运行！",
        "（吴光耀）生产部：拓土开疆，抢占市场高地，产量翻新高！",
        "（晋志伟）生产部：质效双升，稳产保供，打造卓越产品力！",
        "（任爱云）市场客服：贴心守护，提升满意度，稳固市场纽带！",
        "（陈叶仪）肉制品中心：匠心制‘味’打造口碑爆品，引领市场味蕾！",
        "（舒俊琴）数据中心：驱动增长，优化供应链，提升数据价值！",
        "（辛奇）物流中心：使命必达，保障时效，完美交付！",
        "（曹源）财务中心：精打细算，严控风险，保障资金动脉！"
    ];

    const photoUrls = [
        "../images/container/1-余何南.jpg",
        "../images/container/2-吴光耀.jpg",
        "../images/container/3-张天雄.jpg",
        "../images/container/4-曹源.jpg",
        "../images/container/5-甘石兰.jpg",
        "../images/container/6-舒舒.jpg",
        "../images/container/7-.jpg",
        "../images/container/8-龚金猛.jpg",
        "../images/container/9-林文华.jpg"
    ];

    let index = -1;

    // 初始化无缝照片墙
    const container = document.getElementById('heart-container');
    const flashOverlay = document.getElementById('flash-overlay');
    
    photoUrls.forEach((url, i) => {
        const cell = document.createElement('div');
        cell.className = 'photo-item';
        cell.style.backgroundImage = `url('${url}')`;
        container.appendChild(cell);
    });

    const items = document.querySelectorAll('.photo-item');

    // 陨石撞击效果 - 彗星撞地球加强版
    function triggerMeteorImpact(idx) {
        const target = items[idx];
        const rect = target.getBoundingClientRect();
        const targetX = rect.left + rect.width / 2;
        const targetY = rect.top + rect.height / 2;

        // 1. 创建陨石
        const meteor = document.createElement('div');
        meteor.className = 'meteor';
        document.body.appendChild(meteor);

        // 随机起点 (屏幕外更远的地方)
        const startX = window.innerWidth + 800;
        const startY = -600;
        const angle = Math.atan2(targetY - startY, targetX - startX) * 180 / Math.PI;
        
        gsap.set(meteor, { x: startX, y: startY, rotation: angle + 90, scale: 0.5 });

        // 2. 飞行并撞击 (加速效果)
        gsap.to(meteor, {
            x: targetX,
            y: targetY,
            scale: 1.5,
            duration: 0.7,
            ease: "power4.in", // 越落越快
            onComplete: () => {
                meteor.remove();
                
                // 屏幕剧烈抖动 - 极大强度
                gsap.to(".scene", { 
                    x: "random(-30, 30)", 
                    y: "random(-30, 30)", 
                    duration: 0.04, 
                    repeat: 15, 
                    yoyo: true,
                    onComplete: () => gsap.set(".scene", { x: 0, y: 0 })
                });

                // 产生大范围火花和冲击波
                createExplosion(targetX, targetY);
                createShockwave(targetX, targetY);

                // 点亮图片
                lightUpWithFlash(idx);
            }
        });
    }

    function createShockwave(x, y) {
        const wave = document.createElement('div');
        wave.className = 'shockwave';
        document.body.appendChild(wave);
        gsap.set(wave, { left: x, top: y, width: 0, height: 0, xPercent: -50, yPercent: -50, opacity: 1 });
        gsap.to(wave, { width: 700, height: 700, opacity: 0, duration: 0.8, ease: "power2.out", onComplete: () => wave.remove() });
    }

    function createExplosion(x, y) {
        for (let i = 0; i < 50; i++) { // 更多粒子
            const p = document.createElement('div');
            p.className = 'particle';
            p.style.left = x + 'px';
            p.style.top = y + 'px';
            document.body.appendChild(p);
            
            const angle = Math.random() * Math.PI * 2;
            const dist = 100 + Math.random() * 350;
            
            gsap.to(p, {
                x: Math.cos(angle) * dist,
                y: Math.sin(angle) * dist,
                opacity: 0,
                scale: 0,
                duration: 0.6 + Math.random() * 1,
                ease: "power3.out",
                onComplete: () => p.remove()
            });
        }
    }

    function lightUpWithFlash(idx) {
        const target = items[idx];
        
        // 1. 全局闪现感
        gsap.to(flashOverlay, { opacity: 0.7, duration: 0.05, yoyo: true, repeat: 1 });

        // 2. 局部点亮特效
        const tl = gsap.timeline();
        tl.to(target, { filter: "grayscale(0%) brightness(12)", duration: 0.1 })
          .to(target, { filter: "grayscale(100%) brightness(0.2)", duration: 0.1 })
          .to(target, { filter: "grayscale(0%) brightness(5)", duration: 0.1 })
          .to(target, { filter: "grayscale(0%) brightness(1.3)", duration: 1.2, ease: "power2.out" });

        target.classList.add('active');

        // 3. 背景光晕反馈
        gsap.to(".glow-circle", { 
            scale: 1.3 + (idx * 0.1), 
            opacity: 0.5 + (idx * 0.05), 
            background: `radial-gradient(circle, rgba(255, 215, 0, ${0.3 + idx*0.05}) 0%, transparent 70%)`,
            duration: 1.5
        });
    }

    document.getElementById('action-btn').addEventListener('click', function() {
        if (index < oaths.length - 1) {
            index++;
            
            // 按钮点击反馈
            gsap.to(this, { scale: 0.8, duration: 0.1, yoyo: true, repeat: 1 });

            // 更新文字动画
            gsap.to(".oath-text", { opacity: 0, y: 30, duration: 0.2, onComplete: () => {
                document.getElementById('oath-display').innerText = oaths[index];
                gsap.fromTo(".oath-text", { opacity: 0, y: -30 }, { opacity: 1, y: 0, duration: 0.4 });
                
                // 执行撞击点亮
                triggerMeteorImpact(index);
            }});

            if (index === oaths.length - 1) {
                setTimeout(() => {
                    document.getElementById('oath-display').innerText = "九大部门集结完毕，见证巅峰时刻！";
                    this.innerText = "开启巅峰飞跃";
                    this.style.background = "linear-gradient(45deg, #00d4ff, #0056b3)";
                    this.classList.add('final-step');
                }, 3000);
            }
        } else {
            // 跳转到最终章
            const flash = document.getElementById('flash');
            flash.style.display = 'block';
            gsap.to(flash, { opacity: 1, duration: 2, onComplete: () => {
                window.location.href = 'launch.html';
            }});
        }
    });

    // 点击容器也可以触发
    container.addEventListener('click', () => {
        if (!document.getElementById('action-btn').classList.contains('final-step')) {
            document.getElementById('action-btn').click();
        }
    });
</script>

</body>
</html>
